<div class="file-upload">
  <input
    #fileInput
    type="file"
    class="input hidden choose-file"
    (change)="chooseFile($event)"
    [readonly]="progress !== 0 && progress !== 100"
  />
  <mat-form-field appearance="outline" class="form-control file-form-field">
    <div class="file-input-container">
      <mat-label class="label">Upload files</mat-label>
      <div class="file-input-wrapper">
        <input
          autocomplete="off"
          class="input select-file"
          [readonly]="true"
          matInput
          [ngModel]="selectedFile ? selectedFile.name : ''"
        >
        <button
          *ngIf="!selectedFile"
          aria-label="Attach file"
          class="button"
          [disabled]="progress !== 0 && progress !== 100"
          matPrefix
          mat-raised-button
          color="primary"
          (click)="selectFile()"
        >
          <mat-icon class="icon">attach_file</mat-icon>
          <span class="title">Browse</span>
        </button>
        <button
          *ngIf="selectedFile"
          aria-label="Clear"
          class="button"
          [disabled]="progress !== 0 && progress !== 100"
          matPrefix
          mat-raised-button
          color="primary"
          (click)="clear()"
        >
          <mat-icon class="icon">clear</mat-icon>
          <span class="title">Clear</span>
        </button>
        <button
          *ngIf="selectedFile"
          aria-label="Upload"
          class="button upload"
          [disabled]="progress !== 0 && progress !== 100"
          matPrefix
          mat-raised-button
          color="primary"
          (click)="upload()"
        >
          <span class="title">Upload</span>
        </button>
      </div>
    </div>
  </mat-form-field>
  <mat-progress-bar *ngIf="progress !== 0 && progress !== 100" color="accent" mode="indeterminate"></mat-progress-bar>
  <span *ngIf="progress === 100" class="message-upload-complete">
    <mat-icon class="icon" color="primar">check_circle</mat-icon>
    <span class="mat-body text">upload complete</span>
  </span>
</div>
